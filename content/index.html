<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css">
    <link rel="stylesheet" href="/css/default.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.5.1/marked.min.js"></script>
    <script>
        function getParameters() {
            const parameters = {};
            const vars = window.location.search.substring(1).split('&');
            let pair;
            for (let i = 0; i < vars.length; i++) {
                pair = vars[i].split('=');
                if (typeof parameters[pair[0]] === 'undefined') parameters[pair[0]] = pair[1];
                else if (typeof parameters[pair[0]] === 'string') parameters[pair[0]] = [parameters[pair[0]], pair[1]];
                else parameters[pair[0]].push(pair[1]);
            }
            return parameters;
        }

        function getEntry() {
            const parameters = getParameters();
            const space = parameters.space || 'pcs8f5kjnl9o';
            const token = parameters.token || 'vtujREJfdVrIpHkPL7YXMEeDdMJVLq4M3PZOz_ggrEo';
            const url = 'https://preview.contentful.com/spaces/' + space + '/entries/' + parameters.id + '?access_token=' + token;
            fetch(url)
                .then(response => response.json())
                .then(function (entry) {
                    $('#content').html(marked(entry.fields.content));
                });
        }
        getEntry();
    </script>
</head>
<body id='content'>
</body>
</html>